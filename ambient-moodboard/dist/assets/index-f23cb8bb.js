(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();let $=[],Ae=new Set,c=!1,T=!0,b=!0,V=null,r=null,C=null,F=null,K=null,H=[],f=null,N=0,te=!1,M=null,v=null,q=[],j=null,W=window.matchMedia("(prefers-reduced-motion: reduce)").matches,Y=[],k="default",R=null,L=[],x=!0,B=!0,I=!0,g=!0,w=!0,u=null,p=null,O=[],d=null,ne="ontouchstart"in window||navigator.maxTouchPoints>0,U=null,Q=null,S=[],G=[],y="off",A={},P=new Date().toISOString().split("T")[0];const ge="ambientMoodboardSettings";function Pe(){try{const e=JSON.parse(localStorage.getItem(ge))||{};return c=e.soundEnabled||!1,T=e.chimeEnabled!==!1,b=e.particlesEnabled!==!1,document.getElementById("volumeSlider").value=e.volume||.5,document.getElementById("autoVibeInterval").value=e.autoVibeInterval||10,document.getElementById("focusMode").checked=e.focusMode||!1,document.getElementById("chimeToggle").checked=T,document.getElementById("particlesToggle").checked=b,document.getElementById("autoThemeToggle").checked=e.autoTheme||!1,Y=e.savedMoods||[],k=e.currentTheme||"default",S=e.userQuotes||[],G=e.customThemes||[],y=e.adaptiveThemeMode||"off",A=e.moodJournal||{},x=e.ambientLightingEnabled!==!1,B=e.motionTrailsEnabled!==!1,I=e.glassDistortionEnabled!==!1,g=e.customCursorEnabled!==!1,w=e.parallaxEnabled!==!1,e}catch(e){return console.error("Error loading settings:",e),{}}}function s(){const e={soundEnabled:c,chimeEnabled:T,particlesEnabled:b,volume:parseFloat(document.getElementById("volumeSlider").value),autoVibeInterval:parseInt(document.getElementById("autoVibeInterval").value),focusMode:document.getElementById("focusMode").checked,autoTheme:document.getElementById("autoThemeToggle").checked,savedMoods:Y,currentTheme:k,userQuotes:S,customThemes:G,adaptiveThemeMode:y,moodJournal:A,ambientLightingEnabled:x,motionTrailsEnabled:B,glassDistortionEnabled:I,customCursorEnabled:g,parallaxEnabled:w};try{localStorage.setItem(ge,JSON.stringify(e))}catch(t){console.error("Error saving settings:",t),h("Failed to save settings","error")}}function De(){var i,l;const e=document.getElementById("moodQuote").textContent,t=document.getElementById("moodImage").src,n=((i=$.find(a=>e.includes(a.text)))==null?void 0:i.tag)||"general",o={quote:{text:e.split("—")[0].trim().replace(/"/g,""),author:((l=e.split("—")[1])==null?void 0:l.trim())||"Unknown"},image:t||"",audio:"",tag:n,savedAt:new Date().toISOString()};Y.push(o),s(),alert("Mood saved!")}function qe(){Oe(),document.getElementById("savedGallery").style.display="block"}function Oe(){const e=document.getElementById("savedMoodsList");e.innerHTML="",Y.forEach((t,n)=>{const o=document.createElement("div");o.className="saved-mood-item";const i=document.createElement("img");i.src=t.image||"",i.alt="Saved mood image",i.style.display=t.image?"block":"none";const l=document.createElement("blockquote");l.innerHTML=`<p>"${t.quote.text}"</p><cite>— ${t.quote.author}</cite>`,o.appendChild(i),o.appendChild(l),e.appendChild(o)})}async function Qe(){try{const e=await fetch("assets/quotes.json");if(!e.ok)throw new Error("Failed to load quotes");$=await e.json()}catch(e){console.error("Error loading quotes:",e),document.getElementById("moodQuote").textContent="Failed to load quotes."}}async function $e(){}async function Fe(){r||(r=new(window.AudioContext||window.webkitAudioContext),C=r.createGain(),F=r.createBiquadFilter(),F.type="lowpass",F.frequency.setValueAtTime(1e3,r.currentTime),C.connect(F),F.connect(r.destination),C.gain.setValueAtTime(parseFloat(document.getElementById("volumeSlider").value),r.currentTime)),r.state==="suspended"&&await r.resume()}async function He(){try{const e=await fetch("assets/audio/SAD!.mp3");if(e.ok){const n=await e.arrayBuffer();K=await r.decodeAudioData(n)}const t=["Heat Waves - Slowed.mp3","Love Yourself.mp3","Dandelions - slowed + reverb.mp3"];for(const n of t){const o=await fetch("assets/audio/"+n);if(o.ok){const i=await o.arrayBuffer(),l=await r.decodeAudioData(i);H.push(l)}}}catch(e){console.error("Error preloading audio buffers:",e)}}async function je(){if(!(!T||!K||!c))try{const e=r.createBufferSource();e.buffer=K,e.connect(C),e.start()}catch(e){console.error("Error playing chime:",e)}}async function fe(e){if(!e)return;if(f){const o=f.gain;o.setValueAtTime(o.value,r.currentTime),o.exponentialRampToValueAtTime(.01,r.currentTime+1),setTimeout(()=>{f&&(f.stop(),f=null)},1e3)}const t=r.createBufferSource();t.buffer=e,t.loop=!0;const n=r.createGain();n.gain.setValueAtTime(0,r.currentTime),n.gain.linearRampToValueAtTime(1,r.currentTime+1),t.connect(n),n.connect(C),t.start(),f={source:t,gain:n}}function Ve(){!c||H.length===0||(N=(N+1)%H.length,fe(H[N]).catch(console.error))}function ye(){f&&(f.gain.gain.setValueAtTime(0,r.currentTime),f.source.stop(),f=null)}function pe(){te=!0,document.getElementById("audioOverlay").classList.add("hidden"),Fe().then(()=>He())}function Re(e,t){t.size>=e.length&&t.clear();let n;do n=Math.floor(Math.random()*e.length);while(t.has(n));return t.add(n),e[n]}async function _(){if($.length===0)return;const e=Re($,Ae);Ke(e.tag),await Ne(e),s()}async function Ne(e){const t=document.getElementById("moodQuote");t.style.opacity="0",await new Promise(n=>setTimeout(n,200)),t.innerHTML=`<p>"${e.text}"</p><cite>— ${e.author}</cite>`,t.style.opacity="1"}function Ue(){c=!c,T=c;const e=document.getElementById("soundToggle");e.textContent=c?"Sound On":"Sound Off",e.setAttribute("aria-pressed",c),document.getElementById("audioControl").disabled=!c,document.getElementById("nextSongBtn").disabled=!c,document.getElementById("chimeToggle").checked=T,c||ye(),s()}function ze(){if(document.getElementById("autoVibe").checked){const t=parseInt(document.getElementById("autoVibeInterval").value)*1e3;V=setInterval(()=>{_().catch(console.error)},t)}else V&&(clearInterval(V),V=null);s()}function Ee(){const e=document.getElementById("focusMode");document.body.classList.toggle("focus-mode",e.checked),s()}function Je(){te||pe(),f?ye():fe(H[N]).catch(console.error)}function We(){C&&C.gain.setValueAtTime(parseFloat(document.getElementById("volumeSlider").value),r.currentTime),s()}function Ye(){T=document.getElementById("chimeToggle").checked,s()}function Ge(){b=document.getElementById("particlesToggle").checked,b?(be(),Be()):(q=[],L=[],j&&(cancelAnimationFrame(j),j=null)),s()}function oe(e){document.body.classList.remove("theme-cozy-winter","theme-golden-hour","theme-rainy-loft","theme-starlit-night"),e!=="default"&&document.body.classList.add("theme-"+e),k=e,_e(e),s()}function ve(e){const t={"cozy-winter":"Cozy Winter","golden-hour":"Golden Hour","rainy-loft":"Rainy Loft","starlit-night":"Starlit Night"},n=document.getElementById("themeCaption");t[e]&&(n.textContent=`Now playing: ${t[e]}`,n.style.display="block",setTimeout(()=>{n.style.display="none"},2e3))}function Xe(){const t=document.getElementById("themeSelect").value;oe(t),ve(t),c&&T&&je()}function de(){document.getElementById("autoThemeToggle").checked?(ce(),R=setInterval(ce,3e5)):R&&(clearInterval(R),R=null),s()}function ce(){const e=["default","cozy-winter","golden-hour","rainy-loft","starlit-night"],n=(e.indexOf(k)+1)%e.length,o=e[n];document.getElementById("themeSelect").value=o,oe(o),ve(o)}class z{constructor(t,n,o,i="quote"){this.x=t,this.y=n,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.life=1,this.maxLife=1,this.color=o,this.size=Math.random()*2+1,this.type=i,this.alpha=1,i==="snow"?(this.color="rgba(255,255,255,0.8)",this.size=Math.random()*2+2,this.vx=(Math.random()-.5)*.2,this.vy=Math.random()*.5+.1):i==="dust"?(this.color="rgba(255,215,0,0.6)",this.size=Math.random()*1+.5,this.vx=(Math.random()-.5)*.1,this.vy=Math.random()*.1):i==="star"&&(this.color="rgba(255,255,255,0.9)",this.size=Math.random()*1+.5,this.vx=0,this.vy=0)}update(){this.type==="snow"?(this.y+=this.vy,this.y>window.innerHeight&&(this.y=-10,this.x=Math.random()*window.innerWidth)):this.type==="dust"?(this.x+=this.vx,this.y+=this.vy,this.x<0&&(this.x=window.innerWidth),this.x>window.innerWidth&&(this.x=0),this.y>window.innerHeight&&(this.y=0)):this.type==="star"?this.alpha=.3+.7*Math.sin(Date.now()*.002+this.x*.01):(this.x+=this.vx,this.y+=this.vy,this.life-=.005,this.vy+=.01)}draw(){v&&(this.type==="star"?v.globalAlpha=this.alpha:v.globalAlpha=this.life/this.maxLife,v.fillStyle=this.color,v.beginPath(),v.arc(this.x,this.y,this.size,0,Math.PI*2),v.fill())}isDead(){return this.type==="quote"&&this.life<=0}}function be(){M=document.getElementById("particleCanvas"),v=M.getContext("2d"),ue(),window.addEventListener("resize",ue)}function ue(){M&&(M.width=window.innerWidth,M.height=window.innerHeight)}function Ke(e,t=5){if(!b||W)return;const o={peace:"rgba(168, 213, 226, 0.6)",motivation:"rgba(184, 230, 184, 0.6)",dreams:"rgba(247, 198, 199, 0.6)",opportunity:"rgba(184, 230, 184, 0.6)",future:"rgba(168, 213, 226, 0.6)",limits:"rgba(247, 198, 199, 0.6)",mind:"rgba(184, 230, 184, 0.6)",action:"rgba(168, 213, 226, 0.6)",life:"rgba(247, 198, 199, 0.6)",happiness:"rgba(184, 230, 184, 0.6)",journey:"rgba(168, 213, 226, 0.6)",belief:"rgba(247, 198, 199, 0.6)",work:"rgba(184, 230, 184, 0.6)",optimism:"rgba(168, 213, 226, 0.6)",perseverance:"rgba(247, 198, 199, 0.6)",success:"rgba(184, 230, 184, 0.6)","inner strength":"rgba(168, 213, 226, 0.6)",positivity:"rgba(247, 198, 199, 0.6)"}[e]||"rgba(168, 213, 226, 0.6)",i=window.innerWidth/2,l=window.innerHeight/2;for(let a=0;a<t;a++)if(q.length<80){const E=i+(Math.random()-.5)*100,m=l+(Math.random()-.5)*100;q.push(new z(E,m,o))}}function _e(e){if(!(!b||W)){if(L=[],e==="cozy-winter")for(let t=0;t<50;t++){const n=Math.random()*window.innerWidth,o=Math.random()*window.innerHeight;L.push(new z(n,o,"","snow"))}else if(e==="golden-hour")for(let t=0;t<30;t++){const n=Math.random()*window.innerWidth,o=Math.random()*window.innerHeight;L.push(new z(n,o,"","dust"))}else if(e==="starlit-night")for(let t=0;t<100;t++){const n=Math.random()*window.innerWidth,o=Math.random()*window.innerHeight;L.push(new z(n,o,"","star"))}}}function Be(){!b||W||(v.clearRect(0,0,M.width,M.height),q=q.filter(e=>(e.update(),e.draw(),!e.isDead())),L.forEach(e=>{e.update(),e.draw()}),q.length>0||L.length>0?j=requestAnimationFrame(Be):j=null)}function h(e,t="success",n=3e3){const o=document.getElementById("toastContainer"),i=document.createElement("div");i.className=`toast ${t}`,i.innerHTML=`${e}<button class="close-btn" onclick="this.parentElement.remove()">&times;</button>`,o.appendChild(i),setTimeout(()=>{i.parentElement&&(i.classList.add("fade-out"),setTimeout(()=>i.remove(),300))},n)}function Ze(){ie(),document.getElementById("customQuotesModal").style.display="flex",document.getElementById("quoteText").focus()}function Ie(){document.getElementById("customQuotesModal").style.display="none"}function et(){const e=document.getElementById("quoteText").value.trim(),t=document.getElementById("quoteAuthor").value.trim();if(!e){h("Quote text is required","error");return}if(e.length>300){h("Quote text must be 300 characters or less","error");return}const n={text:e,author:t||"Unknown",id:Date.now()};S.push(n),$.push(n),s(),document.getElementById("quoteText").value="",document.getElementById("quoteAuthor").value="",ie(),h("Quote added successfully")}function ie(){const e=document.getElementById("quotesList");e.innerHTML="",S.forEach(t=>{const n=document.createElement("div");n.className="quote-item",n.innerHTML=`
            <blockquote>
                <p>"${t.text}"</p>
                <cite>— ${t.author}</cite>
            </blockquote>
            <button onclick="removeUserQuote(${t.id})" aria-label="Remove quote">Remove</button>
        `,e.appendChild(n)})}function tt(){const t=document.getElementById("quotesFileInput").files[0];if(!t){h("Please select a file","error");return}const n=new FileReader;n.onload=o=>{try{let i=[];if(t.name.endsWith(".json"))i=JSON.parse(o.target.result);else if(t.name.endsWith(".txt"))i=o.target.result.split(`
`).filter(D=>D.trim()).map(D=>{const X=D.match(/"([^"]+)"\s*—\s*(.+)/);return X?{text:X[1],author:X[2]}:{text:D,author:"Unknown"}});else throw new Error("Unsupported file format");const l=i.filter(m=>m.text&&m.text.trim()).map(m=>({text:m.text.trim(),author:(m.author||"Unknown").trim(),id:Date.now()+Math.random()})),a=new Set(S.map(m=>m.text.toLowerCase())),E=l.filter(m=>!a.has(m.text.toLowerCase()));S.push(...E),$.push(...E),s(),ie(),h(`Imported ${E.length} quotes`)}catch(i){h("Failed to import quotes: "+i.message,"error")}},n.readAsText(t)}function nt(){const e=JSON.stringify(S,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="user-quotes.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n),h("Quotes exported")}function ot(){Z(),Te(),document.getElementById("themeBuilderModal").style.display="flex"}function we(){document.getElementById("themeBuilderModal").style.display="none"}function Z(){const e=document.getElementById("bgColor1").value,t=document.getElementById("bgColor2").value,n=document.getElementById("accentColor").value,o=document.getElementById("blurSlider").value,i=document.getElementById("contrastSlider").value,l=document.getElementById("fontSelect").value,a=document.querySelector(".preview-card"),E=document.querySelector(".preview-quote");a.style.background=`linear-gradient(135deg, ${e}, ${t})`,a.style.backdropFilter=`blur(${o}px)`,a.style.filter=`contrast(${i})`,a.style.fontFamily=l,E.style.borderLeftColor=n}function it(){const e=prompt("Enter theme name:");if(!e||!e.trim()){h("Theme name is required","error");return}const t={name:e.trim(),bgColor1:document.getElementById("bgColor1").value,bgColor2:document.getElementById("bgColor2").value,accentColor:document.getElementById("accentColor").value,blur:document.getElementById("blurSlider").value,contrast:document.getElementById("contrastSlider").value,fontFamily:document.getElementById("fontSelect").value,id:Date.now()};G.push(t),s(),Te(),h("Theme saved")}function Te(){const e=document.getElementById("customThemesList");e.innerHTML="",G.forEach(t=>{const n=document.createElement("div");n.className="custom-theme-item",n.innerHTML=`
            <span class="theme-name">${t.name}</span>
            <button class="apply-btn" onclick="applyCustomTheme(${t.id})" aria-label="Apply theme ${t.name}">Apply</button>
            <button class="delete-btn" onclick="deleteCustomTheme(${t.id})" aria-label="Delete theme ${t.name}">Delete</button>
        `,e.appendChild(n)})}function lt(){const e=document.getElementById("bgColor1").value,t=document.getElementById("bgColor2").value,n=document.getElementById("accentColor").value,o=document.getElementById("blurSlider").value;document.getElementById("contrastSlider").value;const i=document.getElementById("fontSelect").value;document.documentElement.style.setProperty("--custom-bg-grad-a",e),document.documentElement.style.setProperty("--custom-bg-grad-b",t),document.documentElement.style.setProperty("--custom-accent",n),document.documentElement.style.setProperty("--custom-card-blur",o+"px"),document.documentElement.style.setProperty("--custom-ui-font",i),document.body.classList.remove("theme-cozy-winter","theme-golden-hour","theme-rainy-loft","theme-starlit-night"),document.body.classList.add("theme-custom"),k="custom",h("Preview theme applied")}function at(){const e=["off","manual","auto"],t=e.indexOf(y);y=e[(t+1)%e.length];const n=document.getElementById("adaptiveThemeToggle");n.textContent=`Adaptive ${y.charAt(0).toUpperCase()+y.slice(1)}`,n.setAttribute("aria-pressed",y!=="off"),s(),h(`Adaptive theme: ${y}`)}function J(){const e=document.getElementById("journalDate"),t=document.getElementById("journalIndicator");P=e.value;const n=A[P];t.classList.toggle("has-entry",!!n),rt()}function rt(){const e=A[P]||"";document.getElementById("journalEntry").value=e}function me(){const e=document.getElementById("journalEntry").value.trim();e?A[P]=e:delete A[P],s(),J(),h("Journal entry saved")}function he(e){const t=new Date(P);t.setDate(t.getDate()+e),document.getElementById("journalDate").value=t.toISOString().split("T")[0],J()}function st(){const e=JSON.stringify(A,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`mood-journal-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n),h("Journal exported")}function le({a:e,b:t,c:n}){x&&(document.documentElement.style.setProperty("--bg-a",e),document.documentElement.style.setProperty("--bg-b",t),document.documentElement.style.setProperty("--bg-c",n))}function ee(){if(!x)return;const e=Date.now()*5e-4,t=e*60%360,n=(e*60+120)%360,o=(e*60+240)%360,i=`hsl(${t}, 70%, 60%)`,l=`hsl(${n}, 70%, 50%)`,a=`hsl(${o}, 70%, 55%)`;le({a:i,b:l,c:a})}class dt{constructor(t,n){this.x=t,this.y=n,this.vx=(Math.random()-.5)*2,this.vy=(Math.random()-.5)*2-.5,this.life=Math.random()*1.4+.8,this.maxLife=this.life,this.size=Math.random()*2+1,this.alpha=1}update(){this.x+=this.vx,this.y+=this.vy,this.life-=.016,this.alpha=this.life/this.maxLife,this.vy+=.01}draw(){p&&(p.globalAlpha=this.alpha,p.fillStyle=`rgba(255,255,255,${this.alpha*.6})`,p.beginPath(),p.arc(this.x,this.y,this.size,0,Math.PI*2),p.fill())}isDead(){return this.life<=0}}function xe(){u||(u=document.createElement("canvas"),u.className="motion-trails-canvas",u.width=window.innerWidth,u.height=window.innerHeight,p=u.getContext("2d"),document.body.appendChild(u),window.addEventListener("resize",()=>{u&&(u.width=window.innerWidth,u.height=window.innerHeight)}))}function Le(){!B||!p||(p.clearRect(0,0,u.width,u.height),O=O.filter(e=>(e.update(),e.draw(),!e.isDead())),O.length>0?Q=requestAnimationFrame(Le):Q=null)}function Ce(e,t){if(!(!B||O.length>=80)){for(let n=0;n<3;n++)O.push(new dt(e,t));Q||Le()}}function ae(e=0){I&&document.documentElement.style.setProperty("--distortion-intensity",e)}function Me(e){if(!I)return;const t=e.target.getBoundingClientRect(),n=t.left+t.width/2,o=t.top+t.height/2,i=Math.sqrt(Math.pow(e.clientX-n,2)+Math.pow(e.clientY-o,2)),l=Math.sqrt(t.width*t.width+t.height*t.height)/2,a=Math.max(0,1-i/l)*5;ae(a)}function ke(){d||(d=document.createElement("div"),d.className="cursor-orb",document.body.appendChild(d))}function ct(e,t){if(!g||!d)return;const n=parseFloat(d.style.left||"0"),o=parseFloat(d.style.top||"0"),i=n+(e-n)*.15,l=o+(t-o)*.15;d.style.left=i+"px",d.style.top=l+"px"}function re(){g&&(U=requestAnimationFrame(re))}function Se(e){!g||!d||(e.type==="mouseenter"?d.classList.add("hover"):d.classList.remove("hover"))}function ut(e,t){if(!w)return;const n=window.innerWidth/2,o=window.innerHeight/2,i=(e-n)/n,l=(t-o)/o,a=i*Math.min(6,window.innerWidth*.01),E=l*Math.min(6,window.innerHeight*.01),m=l*-2,D=i*2;document.documentElement.style.setProperty("--parallax-x",a+"px"),document.documentElement.style.setProperty("--parallax-y",E+"px"),document.documentElement.style.setProperty("--parallax-rotate-x",m+"deg"),document.documentElement.style.setProperty("--parallax-rotate-y",D+"deg")}function se(){w&&requestAnimationFrame(se)}function mt(){x=document.getElementById("ambientLightingToggle").checked,s(),x?ee():le({a:"var(--primary-color)",b:"var(--secondary-color)",c:"var(--accent-color)"})}function ht(){B=document.getElementById("motionTrailsToggle").checked,s(),B?xe():(u&&(u.remove(),u=null,p=null),O=[],Q&&(cancelAnimationFrame(Q),Q=null))}function gt(){I=document.getElementById("glassDistortionToggle").checked,s(),I||ae(0)}function ft(){g=document.getElementById("customCursorToggle").checked,s(),g&&!ne?(ke(),re(),document.body.style.cursor="none"):(d&&(d.remove(),d=null),document.body.style.cursor="",U&&(cancelAnimationFrame(U),U=null))}function yt(){w=document.getElementById("parallaxToggle").checked,s(),w?se():(document.documentElement.style.setProperty("--parallax-x","0px"),document.documentElement.style.setProperty("--parallax-y","0px"),document.documentElement.style.setProperty("--parallax-rotate-x","0deg"),document.documentElement.style.setProperty("--parallax-rotate-y","0deg"))}function pt(e){g&&!ne&&ct(e.clientX,e.clientY),w&&ut(e.clientX,e.clientY)}function Et(e){B&&e.target.matches("#vibeBtn, #moodQuote")&&Ce(e.clientX,e.clientY),I&&e.target.matches(".card")&&e.target.addEventListener("mousemove",Me),g&&Se(e)}function vt(e){I&&e.target.matches(".card")&&(e.target.removeEventListener("mousemove",Me),ae(0)),g&&Se(e)}const bt={setThemePalette:le,pulseOrb:(e,t)=>{!g||!d||(d.style.transform=`scale(${1+e*.5})`,setTimeout(()=>{d&&(d.style.transform="")},t))},spawnHoverTrail:Ce};function Bt(e){e.key==="Escape"&&(document.getElementById("customQuotesModal").style.display==="flex"?Ie():document.getElementById("themeBuilderModal").style.display==="flex"?we():document.body.classList.contains("focus-mode")&&(document.getElementById("focusMode").checked=!1,Ee()))}document.addEventListener("DOMContentLoaded",async()=>{Pe(),oe(k),document.getElementById("themeSelect").value=k,document.getElementById("autoThemeToggle").checked&&de(),await Promise.all([Qe(),$e()]),document.getElementById("soundToggle").textContent=c?"Sound On":"Sound Off",document.getElementById("soundToggle").setAttribute("aria-pressed",c),document.getElementById("audioControl").disabled=!c,te||document.getElementById("audioOverlay").classList.remove("hidden"),await _(),b&&!W&&be(),document.getElementById("journalDate").value=P,J();const e=document.getElementById("adaptiveThemeToggle");e.textContent=`Adaptive ${y.charAt(0).toUpperCase()+y.slice(1)}`,e.setAttribute("aria-pressed",y!=="off"),document.getElementById("vibeBtn").addEventListener("click",()=>{_().catch(console.error)}),document.getElementById("soundToggle").addEventListener("click",Ue),document.getElementById("volumeSlider").addEventListener("input",We),document.getElementById("chimeToggle").addEventListener("change",Ye),document.getElementById("particlesToggle").addEventListener("change",Ge),document.getElementById("themeSelect").addEventListener("change",Xe),document.getElementById("autoThemeToggle").addEventListener("change",de),document.getElementById("autoVibe").addEventListener("change",ze),document.getElementById("focusMode").addEventListener("change",Ee),document.getElementById("audioControl").addEventListener("click",Je),document.getElementById("nextSongBtn").addEventListener("click",Ve),document.getElementById("saveMoodBtn").addEventListener("click",De),document.getElementById("viewSavedBtn").addEventListener("click",qe),document.getElementById("closeGalleryBtn").addEventListener("click",()=>{document.getElementById("savedGallery").style.display="none"}),document.getElementById("audioOverlay").addEventListener("click",pe),document.getElementById("customQuotesBtn").addEventListener("click",Ze),document.getElementById("closeQuotesModalBtn").addEventListener("click",Ie),document.getElementById("addQuoteBtn").addEventListener("click",et),document.getElementById("importQuotesBtn").addEventListener("click",tt),document.getElementById("exportQuotesBtn").addEventListener("click",nt),document.getElementById("themeBuilderBtn").addEventListener("click",ot),document.getElementById("closeThemeBuilderBtn").addEventListener("click",we),document.getElementById("saveCustomThemeBtn").addEventListener("click",it),document.getElementById("applyCustomThemeBtn").addEventListener("click",()=>{Z(),lt()}),["bgColor1","bgColor2","accentColor","blurSlider","contrastSlider","fontSelect"].forEach(t=>{document.getElementById(t).addEventListener("input",Z)}),document.getElementById("adaptiveThemeToggle").addEventListener("click",at),document.getElementById("ambientLightingToggle").addEventListener("change",mt),document.getElementById("motionTrailsToggle").addEventListener("change",ht),document.getElementById("glassDistortionToggle").addEventListener("change",gt),document.getElementById("customCursorToggle").addEventListener("change",ft),document.getElementById("parallaxToggle").addEventListener("change",yt),document.getElementById("journalDate").addEventListener("change",J),document.getElementById("journalEntry").addEventListener("input",()=>{clearTimeout(window.journalSaveTimeout),window.journalSaveTimeout=setTimeout(me,2e3)}),document.getElementById("saveJournalBtn").addEventListener("click",me),document.getElementById("prevDayBtn").addEventListener("click",()=>he(-1)),document.getElementById("nextDayBtn").addEventListener("click",()=>he(1)),document.getElementById("exportJournalBtn").addEventListener("click",st),document.addEventListener("keydown",Bt),document.addEventListener("mousemove",pt),document.addEventListener("mouseenter",Et,!0),document.addEventListener("mouseleave",vt,!0),x&&(ee(),setInterval(ee,100)),B&&xe(),g&&!ne&&(ke(),re(),document.body.style.cursor="none"),w&&se(),document.getElementById("ambientLightingToggle").checked=x,document.getElementById("motionTrailsToggle").checked=B,document.getElementById("glassDistortionToggle").checked=I,document.getElementById("customCursorToggle").checked=g,document.getElementById("parallaxToggle").checked=w,window.visuals=bt});
